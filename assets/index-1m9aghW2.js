var Y=Object.defineProperty;var U=(e,n,o)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o;var P=(e,n,o)=>U(e,typeof n!="symbol"?n+"":n,o);import{r as p,j as s,b as X}from"./vendor-react-B_b7dxsI.js";import{R as J}from"./vendor-react-dom-YX5CGG76.js";/* empty css                                  */import{N as Z,O as I,u as b,L as ee,c as te,R as oe}from"./vendor-react-router-p2olTmvb.js";import{T as _,B as V,a as H,g as L,p as ie,b as ne,d as re,i as se,e as le,f as C,h as x,G as h,u as w,S as v,C as ae,j as ce,k as ue,l as de,m as pe}from"./vendor-@mui/material-DFjjg4Zp.js";import{K as me,P as xe,A as fe,C as he,a as ge,b as ye,c as ve,d as N,e as D}from"./vendor-@mui/icons-material-eCEidbPQ.js";import{y as we,d as Ce}from"./vendor-@mui/system-Cyat7jmJ.js";import{l as je}from"./vendor-lodash-bv8dOiEF.js";import"./vendor-cookie-CY119PWS.js";import"./vendor-scheduler-SPyfQU6S.js";import"./vendor-@mui/utils-DS7mc6HK.js";import"./vendor-react-is-BPJnJB5S.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-@emotion/react-DWqaJ2G3.js";import"./vendor-hoist-non-react-statics-C-Qo8PK8.js";import"./vendor-@emotion/cache-BGxKOicI.js";import"./vendor-@emotion/sheet-gUyxtmJr.js";import"./vendor-stylis-DDa9OTMq.js";import"./vendor-@emotion/utils-BijCJQMc.js";import"./vendor-@emotion/serialize-49CNd-Ha.js";import"./vendor-@emotion/hash-WldOFDRm.js";import"./vendor-@emotion/unitless-x5IvBceT.js";import"./vendor-@emotion/memoize-3S_6p140.js";import"./vendor-@emotion/use-insertion-effect-with-fallbacks-CFy5RT4J.js";import"./vendor-react-transition-group-Wyc4kIQf.js";import"./vendor-@babel/runtime-B4YMtfbM.js";import"./vendor-@mui/styled-engine-DCyBxYb0.js";import"./vendor-@emotion/styled-DNtcnkLs.js";import"./vendor-@emotion/is-prop-valid-D5zzdBC6.js";import"./vendor-@mui/private-theming-BweNvHhX.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const t of l)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function o(l){const t={};return l.integrity&&(t.integrity=l.integrity),l.referrerPolicy&&(t.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?t.credentials="include":l.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(l){if(l.ep)return;l.ep=!0;const t=o(l);fetch(l.href,t)}})();const Ae=p.memo(()=>s.jsxs(p.Fragment,{children:[s.jsx(_,{variant:"dense",disableGutters:!0,children:s.jsx(V,{variant:"text",component:Z,to:"/",startIcon:s.jsx(me,{}),disableElevation:!0,disableRipple:!0,children:"Home"})}),s.jsx(I,{})]})),Me=async({request:e})=>{const c=new URL(e.url).searchParams.get("size")??"21";let l=Number.parseInt(c);return(isNaN(l)||l<1)&&(l=21),{size:l}},W=new Map,A=(e,n)=>W.has(e)?!1:(W.set(e,n),!0),O=()=>Array.from(W.entries()),be=()=>O().map(([e,{view:n}])=>({path:e,element:n,loader:Me}));let j=H({palette:{primary:L,mode:"dark",contrastThreshold:5},typography:{fontFamily:"monospace"},components:{MuiButton:{defaultProps:{disableElevation:!0,disableRipple:!0,color:"primary"}},MuiTypography:{defaultProps:{color:we("#fff",.8)},styleOverrides:{root:{userSelect:"none"}}}}});j=H(j,{palette:{opCompare:j.palette.augmentColor({color:{main:le[400]}}),opSwap:j.palette.augmentColor({color:{main:se.A200}}),opWrite:j.palette.augmentColor({color:{main:re.A200}}),opRead:j.palette.augmentColor({color:{main:ne.A200}}),opVerify:j.palette.augmentColor({color:{main:ie[600]}}),rangeBounded:j.palette.augmentColor({color:{main:L[500]}})}});const S=p.memo(({onClick:e})=>s.jsxs(C,{onClick:e,sx:{flexBasis:0,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:[s.jsx(xe,{}),s.jsx(x,{children:"Shuffle once to start"})]})),Se=(e,n)=>{const o=p.useRef(void 0),[c,l]=p.useState(!1),t=p.useCallback(()=>{o.current!==void 0&&(clearInterval(o.current),o.current=void 0,l(!1))},[]),i=p.useCallback(()=>{o.current===void 0&&(l(!0),o.current=setInterval(()=>{e()&&t()},1e3/n))},[e,n,t]);return{animationActive:c,playAnimation:i,stopAnimation:t}},q=({waveform:e="sine",gain:n=.1,duration:o=1,fadeDuration:c=.1}={})=>{const l=p.useRef(null),t=p.useCallback(()=>(l.current===null&&(l.current=new window.AudioContext),l.current),[]);return p.useCallback(u=>{const r=t(),a=r.createOscillator(),d=r.createGain();a.type=e,a.frequency.setValueAtTime(u,r.currentTime),d.gain.setValueAtTime(n,r.currentTime),d.gain.exponentialRampToValueAtTime(.001,r.currentTime+o-c),a.connect(d),d.connect(r.destination),a.start(r.currentTime),a.stop(r.currentTime+o)},[t,e,n,o,c])},k=p.memo(({onNextFrame:e,onPrevFrame:n,onShuffle:o})=>{const{animationActive:c,playAnimation:l,stopAnimation:t}=Se(e,12),i=q({waveform:"sine"}),u=p.useCallback(()=>{c?t():l()},[t,l,c]),r=p.useCallback(()=>{c&&t(),e()},[c,e,t]),a=p.useCallback(()=>{c&&t(),n()},[n,c,t]),d=p.useCallback(()=>{c&&t(),o(),i(300)},[c,o,i,t]);return s.jsxs(_,{variant:"dense",disableGutters:!0,sx:{gap:1,flexWrap:"wrap"},children:[s.jsx(V,{variant:"contained",onClick:d,children:s.jsx(fe,{})}),s.jsx(V,{variant:"contained",onClick:a,children:s.jsx(he,{})}),s.jsx(V,{variant:"contained",onClick:r,children:s.jsx(ge,{})}),s.jsx(V,{variant:"contained",onClick:u,children:c?s.jsx(ye,{}):s.jsx(ve,{})})]})}),$={Phrygian:[0,1,3,5,7,8,10],Lydian:[0,2,4,6,7,9,11]},M=({scalePattern:e=$.Lydian,baseMidi:n=60,maxOctave:o=2,wrapOctave:c=!0,...l}={})=>{const t=q(l),i=p.useCallback(r=>{const a=Math.max(1,Math.floor(r)),d=(a-1)%e.length,m=Math.floor((a-1)/e.length),f=c?m%(o+1):Math.min(m,o),g=n+e[d]+f*12;return 440*Math.pow(2,(g-69)/12)},[e,n,o,c]);return{playNote:p.useCallback(r=>t(i(r)),[t,i])}},B=p.memo(({backgroundColor:e,height:n,children:o,onMouseEnter:c})=>s.jsx(h,{component:"div",tabIndex:0,onMouseEnter:c,size:1,sx:{backgroundColor:e,height:`${n}%`,transition:"all 0.05s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",overflow:"clip","&:hover":{backgroundColor:Ce(e,.5)}},children:o})),ke=p.memo(({frame:e})=>{const{palette:n}=w(),{playNote:o}=M({gain:.05,duration:1,fadeDuration:.2,scalePattern:$.Phrygian});p.useEffect(()=>{if(e.compared!==void 0){const t=Math.max(...e.compared),i=e.items.at(t);i!==void 0&&o(i)}if(e.swapped!==void 0){const t=Math.max(...e.swapped),i=e.items.at(t);i!==void 0&&o(i)}e.verifyAt!==void 0&&o(e.verifyAt)},[e,o]);const c=p.useCallback(t=>{let i=n.rangeBounded.light;return e.verifyAt===t?i=n.opVerify.main:e.compared!==void 0&&e.compared.includes(t)?i=n.opCompare.main:e.swapped!==void 0&&e.swapped.includes(t)?i=n.opSwap.main:e.rightBound!==void 0&&t>=e.rightBound&&(i=n.rangeBounded.dark),i},[e,n]),l=p.useCallback(t=>()=>{o(t)},[o]);return s.jsx(h,{container:!0,columns:e.items.length,alignItems:"flex-end",sx:{flexBasis:0,flexGrow:1},children:e.items.map((t,i)=>s.jsx(B,{height:t/e.items.length*100,backgroundColor:c(i),onMouseEnter:l(t)},`sort-item-${i}`))})}),F=e=>{const n=p.useRef(e),[o,c]=p.useState(0),[l,t]=p.useState([]),i=p.useCallback(()=>{n.current.reset();const d=[],m=n.current.next();m!==void 0&&d.push(m),t(d),c(d.length-1)},[]),u=p.useCallback(()=>{if(o<l.length-1)return c(Math.min(o+1,l.length-1)),!1;const d=n.current.next();if(d===void 0)return!0;const m=[...l,d];return t(m),c(Math.min(o+1,m.length-1)),!1},[o,l]),r=p.useCallback(()=>c(d=>Math.max(0,d-1)),[]),a=p.useMemo(()=>l.at(o),[o,l]);return{shuffleDataset:i,prevFrame:r,nextFrame:u,frame:a}},R=e=>{const n=[];for(let o=1;o<=e;o++)n.push(o);return je.shuffle(n)};class G{constructor(n){P(this,"currGen");P(this,"size");this.size=Math.max(1,n),this.currGen=this.getGeneratorFunction()}next(){const n=this.currGen.next();if(n.done!==void 0&&!n.done)return n.value}reset(){this.currGen=this.getGeneratorFunction()}}function*Be(e){const n=e.length;let o=0,c=0;function*l(t={}){yield{...t,items:structuredClone(e),swapCount:o,compareCount:c}}yield*l();for(let t=0;t<n-1;t++)for(let i=0;i<n-t-1;i++){const u=e[i],r=e[i+1],a=r<=u;c++,yield*l({rightBound:n-t,compared:[i,i+1]}),a&&(e[i]=r,e[i+1]=u,o++,yield*l({rightBound:n-t,swapped:[i,i+1]}))}for(let t=0;t<n;t++)yield*l({verifyAt:t});yield*l()}class Fe extends G{getGeneratorFunction(){return Be(R(this.size))}}const Re=()=>{const{size:e}=b(),{frame:n,nextFrame:o,prevFrame:c,shuffleDataset:l}=F(new Fe(e)),{palette:t}=w();return s.jsxs(C,{component:"div",tabIndex:0,sx:{display:"flex",flexDirection:"column",flexBasis:0,flexGrow:1},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Bubble sort"}),s.jsxs(v,{spacing:1,flexDirection:"row",alignItems:"center",flexWrap:"wrap",useFlexGap:!0,children:[s.jsx(x,{sx:{color:t.opSwap.main},children:`Swaps: ${(n==null?void 0:n.swapCount)??0}`}),s.jsx(x,{sx:{color:t.opCompare.main},children:`Comparisons: ${(n==null?void 0:n.compareCount)??0}`})]}),s.jsx(k,{onNextFrame:o,onPrevFrame:c,onShuffle:l})]}),n===void 0&&s.jsx(S,{onClick:l}),n!==void 0&&s.jsx(ke,{frame:n})]})},Ge=p.memo(Re),z=p.memo(({mem:e,playOnRead:n,playOnWrite:o,playOnVerify:c})=>{const{playNote:l}=M({gain:.05,duration:1,fadeDuration:.2,scalePattern:$.Lydian}),{palette:t}=w();p.useEffect(()=>{if(n&&e.readAt!==void 0){const r=e.items.at(e.readAt);r!==void 0&&r>0&&l(r)}if(o&&e.writtenAt!==void 0){const r=e.items.at(e.writtenAt);r!==void 0&&r>0&&l(r)}if(c&&e.verifyAt!==void 0){const r=e.items.at(e.verifyAt);r!==void 0&&l(r)}},[e,l,n,o,c]);const i=p.useCallback(r=>{let a=t.rangeBounded.light;return e.verifyAt===r?a=t.opVerify.main:e.readAt===r?a=t.opRead.main:e.writtenAt===r&&(a=t.opWrite.main),a},[e,t]),u=p.useCallback(r=>()=>{l(r)},[l]);return s.jsx(h,{container:!0,columns:e.items.length,spacing:0,sx:{height:"100%",alignItems:"flex-end",flexGrow:1,flexBasis:0},children:e.items.map((r,a)=>s.jsx(B,{height:r/e.items.length*100,onMouseEnter:u(r),backgroundColor:i(a)},`sort-item-${a}`))})}),Ve=p.memo(({frame:e})=>s.jsxs(h,{container:!0,spacing:2,columns:1,sx:{flexGrow:1,flexBasis:0},children:[s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(z,{mem:e.mainMem,playOnVerify:!0,playOnRead:!0,playOnWrite:!0})}),s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(z,{mem:e.auxiMem,playOnWrite:!0})}),s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(z,{mem:e.sortMem})})]}));function*Pe(e){const n=e.length,o=Math.max(...e);let c=0,l=0;const t=new Array(o+1).fill(0),i=new Array(n).fill(0),u=({auxiMem:r,mainMem:a,sortMem:d}={})=>({mainMem:{...a,items:structuredClone(e)},auxiMem:{...r,items:structuredClone(t)},sortMem:{...d,items:structuredClone(i)},readCount:l,writeCount:c});yield u();for(let r=0;r<n;r++)t[e[r]]++,l++,c++,yield u({mainMem:{readAt:r},auxiMem:{writtenAt:e[r]}});for(let r=1;r<=o;r++)t[r]+=t[r-1],l++,c++,yield u({auxiMem:{writtenAt:r,readAt:r-1}});for(let r=n-1;r>=0;r--)i[t[e[r]]-1]=e[r],t[e[r]]--,l++,l++,c++,yield u({mainMem:{readAt:r},auxiMem:{readAt:e[r]},sortMem:{writtenAt:t[e[r]]-1}}),t[e[r]]--,l++,c++,yield u({mainMem:{readAt:r},auxiMem:{writtenAt:e[r]}});for(let r=0;r<n;r++)e[r]=i[r],l++,c++,yield u({mainMem:{writtenAt:r},sortMem:{readAt:r}});for(let r=0;r<n;r++)yield u({mainMem:{verifyAt:r}});yield u()}class ze extends G{getGeneratorFunction(){return Pe(R(this.size))}}const Ee=()=>{const{size:e}=b(),{palette:n}=w(),{frame:o,nextFrame:c,prevFrame:l,shuffleDataset:t}=F(new ze(e));return s.jsxs(C,{component:"div",tabIndex:0,sx:{display:"flex",flexDirection:"column",flexBasis:0,flexGrow:1},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Counting sort"}),s.jsxs(v,{flexDirection:"row",flexWrap:"wrap",spacing:1,useFlexGap:!0,children:[s.jsx(x,{sx:{color:n.opWrite.main},children:`Writes: ${(o==null?void 0:o.writeCount)??0}`}),s.jsx(x,{sx:{color:n.opRead.main},children:`Reads: ${(o==null?void 0:o.readCount)??0}`})]}),s.jsx(k,{onNextFrame:c,onPrevFrame:l,onShuffle:t})]}),o===void 0&&s.jsx(S,{onClick:t}),o!==void 0&&s.jsx(Ve,{frame:o})]})},We=p.memo(Ee),Ne=p.memo(({size:e,frame:n})=>{const{playNote:o}=M(),{palette:c}=w();p.useEffect(()=>{if(n.compared!==void 0){const i=Math.max(...n.compared),u=n.items.at(i);u!==void 0&&o(u)}if(n.swapped!==void 0){const i=Math.max(...n.swapped),u=n.items.at(i);u!==void 0&&o(u)}if(n.verifyAt!==void 0){const i=n.items.at(n.verifyAt);i!==void 0&&o(i)}},[n,o]);const l=p.useCallback(i=>{let u=c.rangeBounded.light;return n.verifyAt===i?u=c.opVerify.main:n.rightBound!==void 0&&i>n.rightBound?u=c.rangeBounded.dark:n.compared!==void 0&&n.compared.includes(i)?u=c.opCompare.main:n.swapped!==void 0&&n.swapped.includes(i)&&(u=c.opSwap.main),u},[c,n]),t=p.useCallback(i=>()=>o(i),[o]);return s.jsx(h,{container:!0,columns:e,spacing:0,alignItems:"flex-end",sx:{flexBasis:0,flexGrow:1},children:n.items.map((i,u)=>{const r=l(u),a=c.getContrastText(r);return s.jsxs(B,{backgroundColor:r,height:i/n.items.length*100,onMouseEnter:t(i),children:[n.parent===u&&s.jsx(N,{sx:{color:a,width:"100%"}}),n.children!==void 0&&n.children.includes(u)&&s.jsx(D,{sx:{color:a,width:"100%"}})]},`sort-item-${u}`)})})});function*De(e){const n=e.length;let o=0,c=0;function*l(i={}){yield{...i,items:structuredClone(e),swapCount:o,compareCount:c}}function*t(i,u){for(;u*2+1<i;){const r=u*2+1,a=r+1;let d=r;if(r+1<i){const y=e[r]<e[r+1];c++,yield*l({compared:[r,r+1],parent:u,children:[r,a],rightBound:i-1}),y&&d++}const m=e[u]>=e[d];if(c++,yield*l({compared:[u,d],parent:u,children:[r,a<i?a:void 0].filter(y=>y!==void 0),rightBound:i-1}),m)return;const f=e[u],g=e[d];e[u]=g,e[d]=f,o++,yield*l({swapped:[u,d],parent:u,children:[r,a<i?a:void 0].filter(y=>y!==void 0),rightBound:i-1}),u=d}}yield*l();for(let i=n-1;i>=0;i--)yield*t(n,i);for(let i=n-1;i>0;i--){const u=e[0],r=e[i];e[0]=r,e[i]=u,o++,yield*l({swapped:[0,i],rightBound:i}),yield*t(i,0)}for(let i=0;i<n;i++)yield*l({verifyAt:i});yield*l()}class $e extends G{getGeneratorFunction(){return De(R(this.size))}}const Te=()=>{const{size:e}=b(),{palette:n}=w(),{frame:o,nextFrame:c,prevFrame:l,shuffleDataset:t}=F(new $e(e));return s.jsxs(C,{component:"div",tabIndex:0,sx:{flexBasis:0,flexGrow:1,display:"flex",flexDirection:"column"},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Heap sort"}),s.jsxs(v,{spacing:1,flexDirection:"row",alignItems:"center",flexWrap:"wrap",useFlexGap:!0,children:[s.jsx(x,{sx:{color:n.opSwap.main},children:`Swaps: ${(o==null?void 0:o.swapCount)??0}`}),s.jsx(x,{sx:{color:n.opCompare.main},children:`Comparisons: ${(o==null?void 0:o.compareCount)??0}`})]}),s.jsx(k,{onNextFrame:c,onPrevFrame:l,onShuffle:t})]}),o===void 0&&s.jsx(S,{onClick:t}),o!==void 0&&s.jsx(Ne,{frame:o,size:e})]})},Q=p.memo(Te),_e=p.memo(()=>{const{playNote:e}=M(),n=p.useCallback(o=>()=>e(o),[e]);return s.jsx(C,{maxWidth:"lg",marginX:"auto",marginY:4,children:s.jsx(h,{container:!0,spacing:2,children:O().map(([o,{display:c}],l)=>{const t=n(l);return s.jsx(h,{size:{xs:12,md:6},children:s.jsx(ae,{variant:"outlined",component:"div",onClick:t,children:s.jsx(ce,{component:ee,to:`/sorters/${o}`,disableRipple:!0,sx:{padding:2},children:s.jsx(ue,{title:c.name})})})},o)})})})}),He=p.memo(({frame:e})=>{const{playNote:n}=M(),{palette:o}=w();p.useEffect(()=>{if(e.compared!==void 0){const t=Math.max(...e.compared),i=e.items.at(t);i!==void 0&&n(i)}if(e.swapped!==void 0){const t=Math.max(...e.swapped),i=e.items.at(t);i!==void 0&&n(i)}if(e.verifyAt!==void 0){const t=e.items.at(e.verifyAt);t!==void 0&&n(t)}},[e,n]);const c=p.useCallback(t=>{let i=o.rangeBounded.light;return e.leftBound!==void 0&&t>e.leftBound?i=o.rangeBounded.dark:e.verifyAt===t?i=o.opVerify.main:e.compared!==void 0&&e.compared.includes(t)?i=o.opCompare.main:e.swapped!==void 0&&e.swapped.includes(t)&&(i=o.opSwap.main),i},[e.compared,e.leftBound,e.swapped,e.verifyAt,o.opCompare.main,o.opSwap.main,o.opVerify.main,o.rangeBounded.dark,o.rangeBounded.light]),l=p.useCallback(t=>()=>n(t),[n]);return s.jsx(h,{container:!0,columns:e.items.length,alignItems:"flex-end",sx:{flexBasis:0,flexGrow:1},children:e.items.map((t,i)=>{const u=c(i);return s.jsx(B,{backgroundColor:u,height:t/e.items.length*100,onMouseEnter:l(t),children:e.key===i&&s.jsx(N,{sx:{width:"100%",color:o.getContrastText(u)}})},`sort-item-${i}`)})})});function*Le(e){const n=e.length;let o=0,c=0;function*l(t={}){yield{...t,items:structuredClone(e),swapCount:o,compareCount:c}}yield*l();for(let t=0;t<n;t++){yield*l({leftBound:t,key:t});let i=t;for(;i>0;){const u=e[i]<e[i-1];if(c++,yield*l({compared:[i,i-1],leftBound:t+1,key:i}),u){const r=e[i],a=e[i-1];e[i]=a,e[i-1]=r,o++,yield*l({swapped:[i,i-1],leftBound:t+1,key:i-1})}i--}}for(let t=0;t<n;t++)yield*l({verifyAt:t});yield*l()}class Oe extends G{getGeneratorFunction(){return Le(R(this.size))}}const qe=()=>{const{size:e}=b(),{frame:n,nextFrame:o,prevFrame:c,shuffleDataset:l}=F(new Oe(e)),{palette:t}=w();return s.jsxs(C,{component:"div",tabIndex:0,sx:{display:"flex",flexDirection:"column",flexBasis:0,flexGrow:1},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Insertion sort"}),s.jsxs(v,{spacing:1,flexDirection:"row",alignItems:"center",flexWrap:"wrap",useFlexGap:!0,children:[s.jsx(x,{sx:{color:t.opSwap.main},children:`Swaps: ${(n==null?void 0:n.swapCount)??0}`}),s.jsx(x,{sx:{color:t.opCompare.main},children:`Comparisons: ${(n==null?void 0:n.compareCount)??0}`})]}),s.jsx(k,{onNextFrame:o,onPrevFrame:c,onShuffle:l})]}),n===void 0&&s.jsx(S,{onClick:l}),n!==void 0&&s.jsx(He,{frame:n})]})},Qe=p.memo(qe),T=p.memo(({mem:e,playOnCompare:n,playOnRead:o,playOnVerify:c,playOnWrite:l})=>{const{playNote:t}=M(),{palette:i}=w();p.useEffect(()=>{if(n&&e.compared!==void 0){const a=Math.max(...e.compared),d=e.items.at(a);d!==void 0&&t(d)}if(c&&e.verifyAt!==void 0){const a=Math.max(e.verifyAt),d=e.items.at(a);d!==void 0&&t(d)}if(o&&e.readAt!==void 0){const a=e.items.at(e.readAt);a!==void 0&&t(a)}if(l&&e.writtenAt!==void 0){const a=e.items.at(e.writtenAt);a!==void 0&&t(a)}},[e,t,n,c,o,l]);const u=p.useCallback(a=>{let d=i.rangeBounded.light;if(e.verifyAt===a)d=i.opVerify.main;else if(e.readAt===a)d=i.opRead.main;else if(e.writtenAt===a)d=i.opWrite.main;else if(e.compared!==void 0&&e.compared.includes(a))d=i.opCompare.main;else if(e.terminals!==void 0){const m=Math.min(...e.terminals),f=Math.max(...e.terminals);(a<m||a>f)&&(d=i.rangeBounded.dark)}return d},[e.compared,e.readAt,e.terminals,e.verifyAt,e.writtenAt,i.opCompare.main,i.opRead.main,i.opVerify.main,i.opWrite.main,i.rangeBounded.dark,i.rangeBounded.light]),r=p.useCallback(a=>()=>{t(a)},[t]);return s.jsx(h,{container:!0,columns:e.items.length,spacing:0,sx:{height:"100%",alignItems:"flex-end",flexGrow:1,flexBasis:0},children:e.items.map((a,d)=>s.jsx(B,{onMouseEnter:r(a),backgroundColor:u(d),height:a/e.items.length*100},`sort-item-${d}`))})}),Ke=p.memo(({frame:e})=>s.jsxs(h,{container:!0,columns:1,sx:{flexGrow:1,flexBasis:0},children:[s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(T,{mem:e.mainMem,playOnCompare:!0,playOnRead:!0,playOnWrite:!0,playOnVerify:!0})}),s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(T,{mem:e.auxiMem,playOnRead:!0})})]}));function*Ye(e){const n=e.length;let o=0,c=0,l=0;const t=new Array(n).fill(0);function*i({mainMem:r,auxiMem:a}={}){yield{compareCount:l,readCount:c,writeCount:o,mainMem:{...r,items:structuredClone(e)},auxiMem:{...a,items:structuredClone(t)}}}function*u(r,a){if(a-r<=0)return;const d=Math.floor((r+a)/2);yield*u(r,d),yield*u(d+1,a);let m=r,f=d+1,g=0;for(t.fill(0);m<=d&&f<=a;){const y=e[m]>e[f];if(l++,yield*i({mainMem:{terminals:[r,a],compared:[m,f]}}),y){c++,o++,t[g]=e[f],yield*i({mainMem:{readAt:f,terminals:[r,a]},auxiMem:{writtenAt:g}}),g++,f++;continue}c++,o++,t[g]=e[m],yield*i({mainMem:{readAt:m,terminals:[r,a]},auxiMem:{writtenAt:g}}),m++,g++}for(;m<=d;)c++,o++,t[g]=e[m],yield*i({mainMem:{terminals:[r,a],readAt:m},auxiMem:{writtenAt:g}}),m++,g++;for(;f<=a;)c++,o++,t[g]=e[f],yield*i({mainMem:{readAt:f,terminals:[r,a]},auxiMem:{writtenAt:g}}),f++,g++;for(let y=0;y<g;y++)c++,o++,e[r+y]=t[y],yield*i({mainMem:{terminals:[r,a],writtenAt:r+y},auxiMem:{readAt:y}})}yield*i(),yield*u(0,n-1);for(let r=0;r<n;r++)yield*i({mainMem:{verifyAt:r}});yield*i()}class Ue extends G{getGeneratorFunction(){return Ye(R(this.size))}}const Xe=()=>{const{size:e}=b(),{palette:n}=w(),{frame:o,nextFrame:c,prevFrame:l,shuffleDataset:t}=F(new Ue(e));return s.jsxs(C,{component:"div",tabIndex:0,sx:{display:"flex",flexDirection:"column",flexBasis:0,flexGrow:1},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Merge sort"}),s.jsxs(v,{flexDirection:"row",flexWrap:"wrap",spacing:1,useFlexGap:!0,children:[s.jsx(x,{sx:{color:n.opWrite.main},children:`Writes: ${(o==null?void 0:o.writeCount)??0}`}),s.jsx(x,{sx:{color:n.opRead.main},children:`Reads: ${(o==null?void 0:o.readCount)??0}`}),s.jsx(x,{sx:{color:n.opCompare.main},children:`Compares: ${(o==null?void 0:o.compareCount)??0}`})]}),s.jsx(k,{onNextFrame:c,onPrevFrame:l,onShuffle:t})]}),o===void 0&&s.jsx(S,{onClick:t}),o!==void 0&&s.jsx(Ke,{frame:o})]})},Je=p.memo(Xe),Ze=p.memo(({frame:e})=>{const{playNote:n}=M(),{palette:o}=w();p.useEffect(()=>{if(e.compared!==void 0){const t=Math.max(...e.compared),i=e.items.at(t);i!==void 0&&n(i)}if(e.swapped!==void 0){const t=Math.max(...e.swapped),i=e.items.at(t);i!==void 0&&n(i)}if(e.verifyAt!==void 0){const t=e.items.at(e.verifyAt);t!==void 0&&n(t)}},[e,n]);const c=p.useCallback(t=>{let i=o.rangeBounded.light;if(e.terminals!==void 0){const u=Math.min(...e.terminals),r=Math.max(...e.terminals);(t<u||t>r)&&(i=o.rangeBounded.dark)}return e.compared!==void 0&&e.compared.includes(t)?i=o.opCompare.main:e.swapped!==void 0&&e.swapped.includes(t)?i=o.opSwap.main:e.verifyAt===t&&(i=o.opVerify.main),i},[e.compared,e.swapped,e.terminals,e.verifyAt,o.opCompare.main,o.opSwap.main,o.opVerify.main,o.rangeBounded.dark,o.rangeBounded.light]),l=p.useCallback(t=>()=>n(t),[n]);return s.jsx(h,{container:!0,columns:e.items.length,spacing:0,alignItems:"flex-end",sx:{flexBasis:0,flexGrow:1},children:e.items.map((t,i)=>{const u=c(i),r=o.getContrastText(u);return s.jsxs(B,{backgroundColor:u,height:t/e.items.length*100,onMouseEnter:l(t),children:[e.partition===i&&s.jsx(D,{sx:{color:r,width:"100%"}}),e.key===i&&s.jsx(N,{sx:{color:r,width:"100%"}})]},`sort-item-${i}`)})})});function*Ie(e){const n=e.length;let o=0,c=0;function*l(u={}){yield{...u,items:structuredClone(e),compareCount:c,swapCount:o}}function*t(u,r){yield*l({terminals:[u,r]}),yield*l({terminals:[u,r],key:r,partition:u});let a=u;for(let f=u;f<r;f++){const g=e[f]>e[r];if(c++,yield*l({compared:[f,r],terminals:[u,r],key:r,partition:a}),g)continue;const y=e[f],K=e[a];e[a]=y,e[f]=K,o++,yield*l({swapped:[f,a],terminals:[u,r],key:r,partition:a}),a++}const d=e[a],m=e[r];return e[a]=m,e[r]=d,o++,yield*l({swapped:[a,r],terminals:[u,r],key:r,partition:a}),a}function*i(u,r){if(u>=r||u<0)return;const a=yield*t(u,r);yield*i(u,a-1),yield*i(a+1,r)}yield*l(),yield*i(0,n-1);for(let u=0;u<n;u++)yield*l({verifyAt:u});yield*l()}class et extends G{getGeneratorFunction(){return Ie(R(this.size))}}const tt=()=>{const{size:e}=b(),{palette:n}=w(),{frame:o,nextFrame:c,prevFrame:l,shuffleDataset:t}=F(new et(e));return s.jsxs(C,{component:"div",tabIndex:0,sx:{display:"flex",flexDirection:"column",flexGrow:1,flexBasis:0},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Quick sort"}),s.jsxs(v,{spacing:1,flexDirection:"row",alignItems:"center",flexWrap:"wrap",useFlexGap:!0,children:[s.jsx(x,{sx:{color:n.opSwap.main},children:`Swaps: ${(o==null?void 0:o.swapCount)??0}`}),s.jsx(x,{sx:{color:n.opCompare.main},children:`Comparisons: ${(o==null?void 0:o.compareCount)??0}`})]}),s.jsx(k,{onNextFrame:c,onPrevFrame:l,onShuffle:t})]}),o===void 0&&s.jsx(S,{onClick:t}),o!==void 0&&s.jsx(Ze,{frame:o})]})},ot=p.memo(tt),E=p.memo(({mem:e,playOnRead:n,playOnWrite:o,playOnVerify:c})=>{const{playNote:l}=M(),{palette:t}=w();p.useEffect(()=>{if(n&&e.readAt!==void 0){const r=e.items.at(e.readAt);r!==void 0&&l(r)}if(o&&e.writtenAt!==void 0){const r=e.items.at(e.writtenAt);r!==void 0&&l(r)}if(c&&e.verifyAt!==void 0){const r=e.items.at(e.verifyAt);r!==void 0&&l(r)}},[e,l,n,o,c]);const i=p.useCallback(r=>{let a=t.rangeBounded.light;return e.readAt===r?a=t.opRead.main:e.writtenAt===r?a=t.opWrite.main:e.verifyAt===r&&(a=t.opVerify.main),a},[e.readAt,e.verifyAt,e.writtenAt,t.opRead.main,t.opVerify.main,t.opWrite.main,t.rangeBounded.light]),u=p.useCallback(r=>()=>l(r),[l]);return s.jsx(h,{container:!0,columns:e.items.length,spacing:0,sx:{height:"100%",alignItems:"flex-end",flexGrow:1,flexBasis:0},children:e.items.map((r,a)=>s.jsx(B,{height:r/e.items.length*100,backgroundColor:i(a),onMouseEnter:u(r)},`sort-item-${a}`))})}),it=p.memo(({frame:e})=>s.jsxs(h,{container:!0,spacing:2,columns:1,sx:{flexGrow:1,flexBasis:0},children:[s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(E,{mem:e.mainMem,playOnVerify:!0,playOnRead:!0,playOnWrite:!0})}),s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(E,{mem:e.auxiMem,playOnWrite:!0})}),s.jsx(h,{size:1,sx:{flexGrow:1},children:s.jsx(E,{mem:e.sortMem})})]}));function*nt(e){const n=e.length,o=Math.max(...e);let c=0,l=0;const t=new Array(n).fill(0),i=new Array(n).fill(0);function*u({mainMem:a,auxiMem:d,sortMem:m}={}){yield{memReadCount:l,memWriteCount:c,mainMem:{...a,items:structuredClone(e)},auxiMem:{...d,items:structuredClone(t)},sortMem:{...m,items:structuredClone(i)}}}function*r(a){for(let d=0;d<n;d++){const m=Math.floor(e[d]/a)%10;t[m]++,l++,c++,yield*u({mainMem:{readAt:d},auxiMem:{writtenAt:m}})}for(let d=1;d<n;d++)t[d]+=t[d-1],l++,c++,yield*u({auxiMem:{readAt:d-1,writtenAt:d}});for(let d=n-1;d>=0;d--){const m=Math.floor(e[d]/a)%10;i[t[m]-1]=e[d],l++,l++,c++,yield*u({mainMem:{readAt:d},auxiMem:{readAt:m,writtenAt:d},sortMem:{writtenAt:t[m]-1}}),t[m]--,l++,c++,yield*u({mainMem:{readAt:d},auxiMem:{writtenAt:m}})}for(let d=0;d<n;d++)e[d]=i[d],l++,c++,yield*u({mainMem:{writtenAt:d},sortMem:{readAt:d}})}yield*u();for(let a=1;Math.floor(o/a)>0;a*=10)t.fill(0),i.fill(0),yield*r(a);for(let a=0;a<n;a++)yield*u({mainMem:{verifyAt:a}});yield*u()}class rt extends G{getGeneratorFunction(){return nt(R(this.size))}}const st=()=>{const{size:e}=b(),{palette:n}=w(),{frame:o,nextFrame:c,prevFrame:l,shuffleDataset:t}=F(new rt(e));return s.jsxs(C,{component:"div",tabIndex:0,sx:{display:"flex",flexDirection:"column",flexGrow:1,flexBasis:0},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Radix sort"}),s.jsxs(v,{flexDirection:"row",flexWrap:"wrap",spacing:1,useFlexGap:!0,children:[s.jsx(x,{sx:{color:n.opWrite.main},children:`Writes: ${(o==null?void 0:o.memWriteCount)??0}`}),s.jsx(x,{sx:{color:n.opRead.main},children:`Reads: ${(o==null?void 0:o.memReadCount)??0}`})]}),s.jsx(k,{onNextFrame:c,onPrevFrame:l,onShuffle:t})]}),o===void 0&&s.jsx(S,{onClick:t}),o!==void 0&&s.jsx(it,{frame:o})]})},lt=p.memo(st),at=p.memo(({frame:e})=>{const{playNote:n}=M(),{palette:o}=w();p.useEffect(()=>{if(e.compared!==void 0){const t=Math.max(...e.compared),i=e.items.at(t);i!==void 0&&n(i)}if(e.swapped!==void 0){const t=Math.max(...e.swapped),i=e.items.at(t);i!==void 0&&n(i)}e.verifyAt!==void 0&&n(e.verifyAt)},[e,n]);const c=p.useCallback(t=>{let i=o.rangeBounded.light;return e.verifyAt===t?i=o.opVerify.main:e.leftBound!==void 0&&t<e.leftBound?i=o.rangeBounded.dark:e.compared!==void 0&&e.compared.includes(t)?i=o.opCompare.main:e.swapped!==void 0&&e.swapped.includes(t)&&(i=o.opSwap.main),i},[e.compared,e.leftBound,e.swapped,e.verifyAt,o.opCompare.main,o.opSwap.main,o.opVerify.main,o.rangeBounded.dark,o.rangeBounded.light]),l=p.useCallback(t=>()=>n(t),[n]);return s.jsx(h,{container:!0,columns:e.items.length,spacing:0,alignItems:"flex-end",sx:{flexBasis:0,flexGrow:1},children:e.items.map((t,i)=>{const u=c(i);return s.jsx(B,{backgroundColor:u,height:t/e.items.length*100,onMouseEnter:l(t),children:e.key===i&&s.jsx(D,{sx:{color:o.getContrastText(u)}})},`sort-item-${i}`)})})});function*ct(e){const n=e.length;let o=0,c=0;function*l(t={}){yield{...t,items:structuredClone(e),swapCount:o,compareCount:c}}yield*l();for(let t=0;t<n;t++){let i=t;yield*l({key:t,leftBound:t});for(let a=t+1;a<n;a++){const d=e[i]>e[a];c++,yield*l({compared:[a,i],key:i,leftBound:t}),d&&(i=a,yield*l({key:i,leftBound:t}))}const u=e[t],r=e[i];e[t]=r,e[i]=u,o++,yield*l({swapped:[t,i],key:t,leftBound:t})}for(let t=0;t<n;t++)yield*l({verifyAt:t});yield*l()}class ut extends G{getGeneratorFunction(){return ct(R(this.size))}}const dt=()=>{const{size:e}=b(),{palette:n}=w(),{frame:o,nextFrame:c,prevFrame:l,shuffleDataset:t}=F(new ut(e));return s.jsxs(C,{component:"div",tabIndex:0,sx:{flexBasis:0,flexGrow:1,display:"flex",flexDirection:"column"},children:[s.jsxs(v,{spacing:1,children:[s.jsx(x,{fontWeight:900,children:"Selection sort"}),s.jsxs(v,{spacing:1,flexDirection:"row",alignItems:"center",flexWrap:"wrap",useFlexGap:!0,children:[s.jsx(x,{sx:{color:n.opSwap.main},children:`Swaps: ${(o==null?void 0:o.swapCount)??0}`}),s.jsx(x,{sx:{color:n.opCompare.main},children:`Comparisons: ${(o==null?void 0:o.compareCount)??0}`})]}),s.jsx(k,{onNextFrame:c,onPrevFrame:l,onShuffle:t})]}),o===void 0&&s.jsx(S,{onClick:t}),o!==void 0&&s.jsx(at,{frame:o})]})},pt=p.memo(dt);A("bubble-sort",{display:{name:"Bubble Sort"},view:s.jsx(Ge,{})});A("selection-sort",{display:{name:"Selection Sort"},view:s.jsx(pt,{})});A("insertion-sort",{display:{name:"Insertion Sort"},view:s.jsx(Qe,{})});A("quick-sort",{display:{name:"Quick Sort"},view:s.jsx(ot,{})});A("heap-sort",{display:{name:"Heap Sort"},view:s.jsx(Q,{})});A("merge-sort",{display:{name:"Merge Sort"},view:s.jsx(Je,{})});A("heap-sort",{display:{name:"Heap Sort"},view:s.jsx(Q,{})});A("radix-sort",{display:{name:"Radix Sort"},view:s.jsx(lt,{})});A("counting-sort",{display:{name:"Counting Sort"},view:s.jsx(We,{})});const mt=te([{path:"/",children:[{index:!0,element:s.jsx(_e,{})},{path:"sorters",element:s.jsx(Ae,{}),children:be()}]}]),xt=p.memo(()=>s.jsxs(de,{theme:j,children:[s.jsx(pe,{enableColorScheme:!0}),s.jsx(oe,{router:mt})]}));J.createRoot(document.getElementById("root")).render(s.jsx(X.StrictMode,{children:s.jsx(xt,{})}));
